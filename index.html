<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>For You, Always</title>
  <link rel="stylesheet" href="style.css" />
  <meta name="theme-color" content="#a06bff"/>
</head>
<body>
  <div class="container">
    <h1 class="title">For You, Always</h1>
    <p class="subtitle">A little corner of magic and love</p>

    <div class="buttons">
      <a href="yes.html" class="btn">Yes üíñ</a>
      <a href="#" class="btn outline" id="noBtn">Not Yet</a>
    </div>

    <div class="tiny-note">Tip: Music will start automatically and unmute after your first tap/click.</div>
    <div class="music-controls">
      <button id="musicToggle" class="btn small">Pause Music</button>
    </div>
  </div>

  <!-- Decorative floating hearts -->
  <div class="floating-hearts">
    <span>‚ù§</span><span>‚ù§</span><span>‚ù§</span><span>‚ù§</span><span>‚ù§</span>
  </div>

  <!-- Background music: autoplay muted; unmutes on first interaction -->
  <audio id="bgm" src="assets/music.mp3" preload="auto" loop muted></audio>

  <script>
    // Gentle "Not Yet" playful nudge
    const noBtn = document.getElementById('noBtn');
    if (noBtn) {
      noBtn.addEventListener('mouseover', () => {
        const dx = (Math.random() * 40 - 20);
        const dy = (Math.random() * 40 - 20);
        noBtn.style.transform = `translate(${dx}px, ${dy}px)`;
      });
      noBtn.addEventListener('mouseleave', () => {
        noBtn.style.transform = 'translate(0, 0)';
      });
    }

    // Audio logic
    const audio = document.getElementById('bgm');
    const toggle = document.getElementById('musicToggle');

    // Try to autoplay immediately (muted allowed in most browsers)
    audio.play().catch(() => { /* ignore */ });

    // On first user interaction, unmute and ensure playback
    function unmuteOnce() {
      audio.muted = false;
      audio.play().catch(() => {});
      window.removeEventListener('click', unmuteOnce);
      window.removeEventListener('touchstart', unmuteOnce);
      window.removeEventListener('keydown', unmuteOnce);
    }
    window.addEventListener('click', unmuteOnce, { once: true });
    window.addEventListener('touchstart', unmuteOnce, { once: true });
    window.addEventListener('keydown', unmuteOnce, { once: true });

    // Resume when user returns to the tab
    document.addEventListener('visibilitychange', () => {
      if (document.visibilityState === 'visible' && audio.paused) {
        audio.play().catch(() => {});
      }
    });

    // Toggle button
    if (toggle) {
      toggle.addEventListener('click', () => {
        if (audio.paused) {
          audio.play().then(() => {
            audio.muted = false;
            toggle.textContent = 'Pause Music';
          }).catch(() => {});
        } else {
          audio.pause();
          toggle.textContent = 'Play Music';
        }
      });
    }
  </script>
</body>
</html>
